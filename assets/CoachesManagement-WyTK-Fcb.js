import{j as e}from"./ui-B5VS9Rxm.js";import{r as s,f as a}from"./react-vendor-C5eXiI5f.js";import{g as r,d as i,u as t,c as l}from"./coachOperations-DtnaD4UU.js";import{g as n,a as c}from"./teamsData-DKVbWA0e.js";import{c as d,X as o,t as m}from"./index-B8v6iQwI.js";import{C as h,a as x,b as j}from"./card-CM7KcF0P.js";import{B as u}from"./button-3IpleGdJ.js";import{P as f,a as g,T as p}from"./trash-DPpm4aak.js";import{I as v,L as b}from"./label-DwvOoeN7.js";import{S as N}from"./search-BaKzZ0pO.js";import{C as w}from"./calendar-BsTQxp1e.js";import{A as y}from"./award-ClmoQY88.js";import{T as C}from"./textarea-BIS6oGJB.js";import{S}from"./save-C7W-cLpe.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=d("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),D=({team:s,onAddNew:a})=>e.jsx(h,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:e.jsxs(x,{className:"flex flex-row items-center justify-between",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full mr-3 flex items-center justify-center",style:{backgroundColor:(null==s?void 0:s.primaryColor)||"#2e7d32"},children:e.jsx(k,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{children:["Управление тренерами: ",(null==s?void 0:s.name)||"Команда"]})]})}),e.jsxs(u,{onClick:a,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(f,{className:"mr-2 h-4 w-4"})," Добавить тренера"]})]})}),F=({searchTerm:s,onSearchChange:a})=>e.jsxs("div",{className:"relative mb-6",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(v,{className:"pl-10",placeholder:"Поиск тренеров по имени или должности...",value:s,onChange:e=>a(e.target.value)})]}),q=({coach:s,onEdit:a,onDelete:r})=>e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm border border-gray-200 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.jsx("div",{className:"text-xs font-medium text-white/70 mb-1",children:s.role}),e.jsx("h3",{className:"text-xl font-bold text-white",children:s.name})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"text-sm",children:["С ",s.since," года"]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-4 w-4 text-amber-500"}),e.jsxs("span",{className:"text-sm",children:[s.experience," лет опыта"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:s.biography}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-auto",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>a(s),className:"text-blue-600 hover:text-blue-900",children:e.jsx(g,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>r(s.id),className:"text-red-600 hover:text-red-900",children:e.jsx(p,{className:"h-4 w-4"})})]})]})]}),I=({coaches:s,onEdit:a,onDelete:r})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map((s=>e.jsx(q,{coach:s,onEdit:a,onDelete:r},s.id))),0===s.length&&e.jsx("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg",children:e.jsx("div",{className:"text-gray-500",children:"Тренеры не найдены. Добавьте первого тренера!"})})]}),L=({coach:a,onSave:r,onCancel:i})=>{const[t,l]=s.useState({...a}),c=n(),d=e=>{const{name:s,value:a}=e.target;["experience"].includes(s)?l({...t,[s]:parseInt(a,10)||0}):l({...t,[s]:a})};return e.jsxs("form",{onSubmit:e=>{e.preventDefault(),r(t)},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",children:"ФИО тренера"}),e.jsx(v,{id:"name",name:"name",value:t.name,onChange:d,required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"role",children:"Должность"}),e.jsx(v,{id:"role",name:"role",value:t.role,onChange:d,required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"since",children:"В клубе с"}),e.jsx(v,{id:"since",name:"since",value:t.since,onChange:d,placeholder:"Год",required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"experience",children:"Опыт работы (лет)"}),e.jsx(v,{id:"experience",name:"experience",type:"number",value:t.experience,onChange:d,min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"teamId",children:"Команда"}),e.jsx("select",{id:"teamId",name:"teamId",value:t.teamId,onChange:d,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:c.map((s=>e.jsx("option",{value:s.id,children:s.name},s.id)))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"image",children:"URL фото"}),e.jsx(v,{id:"image",name:"image",value:t.image,onChange:d,required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"biography",children:"Биография"}),e.jsx(C,{id:"biography",name:"biography",value:t.biography,onChange:d,rows:7,required:!0})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs(u,{variant:"outline",type:"button",onClick:i,children:[e.jsx(o,{className:"mr-2 h-4 w-4"})," Отмена"]}),e.jsxs(u,{type:"submit",className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(S,{className:"mr-2 h-4 w-4"})," Сохранить"]})]})]})},A=({currentCoach:s,onSave:a,onCancel:r})=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-bold",children:!s.id.includes("coach-")||s.id.includes("coach1")||s.id.includes("coach2")||s.id.includes("coach3")?"Редактировать тренера":"Добавить нового тренера"})}),e.jsx(L,{coach:s,onSave:a,onCancel:r})]}),B=()=>{const[n]=a(),d=n.get("team")||"gudauta",[o,h]=s.useState([]),[x,j]=s.useState(""),[u,f]=s.useState(!1),[g,p]=s.useState(null),v=c(d);s.useEffect((()=>{const e=r(d);h(e)}),[d]);const b=o.filter((e=>e.name.toLowerCase().includes(x.toLowerCase())||e.role.toLowerCase().includes(x.toLowerCase())));return e.jsxs("div",{children:[e.jsx(D,{team:v,onAddNew:()=>{const e={id:`coach-${Date.now()}`,name:"",role:"Тренер",image:"https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",since:(new Date).getFullYear().toString(),experience:0,biography:"",teamId:d};p(e),f(!0)}}),u&&g?e.jsx(A,{currentCoach:g,onSave:e=>{try{o.some((s=>s.id===e.id))?(t(e),h(o.map((s=>s.id===e.id?e:s))),m({title:"Тренер обновлен",description:"Информация о тренере успешно обновлена"})):(l(e),h([...o,e]),m({title:"Тренер добавлен",description:"Новый тренер успешно добавлен в систему"})),f(!1),p(null)}catch(s){m({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить изменения"})}},onCancel:()=>{f(!1),p(null)}}):e.jsxs(e.Fragment,{children:[e.jsx(F,{searchTerm:x,onSearchChange:j}),e.jsx(I,{coaches:b,onEdit:e=>{p(e),f(!0)},onDelete:e=>{if(window.confirm("Вы уверены, что хотите удалить этого тренера?"))try{i(e),h(o.filter((s=>s.id!==e))),m({title:"Тренер удален",description:"Тренер был успешно удален из системы"})}catch(s){m({variant:"destructive",title:"Ошибка",description:"Не удалось удалить тренера"})}}})]})]})};export{B as default};
