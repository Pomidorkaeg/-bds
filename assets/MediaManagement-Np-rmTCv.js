import{j as e}from"./ui-B5VS9Rxm.js";import{r as s}from"./react-vendor-C5eXiI5f.js";import{C as a,a as i,b as l}from"./card-CM7KcF0P.js";import{B as t}from"./button-3IpleGdJ.js";import{c as r,X as n,t as c}from"./index-B8v6iQwI.js";import{D as d,a as m,b as o,c as h,d as x,e as j}from"./dialog-C94tb-ZA.js";import{L as u,I as v}from"./label-DwvOoeN7.js";import{S as g,a as p,b as f,c as N,d as b}from"./select-BxoUi1nJ.js";import{S as y}from"./save-C7W-cLpe.js";import{g as w,d as C,u as k,c as S}from"./mediaOperations-4V7sqe86.js";import{I as F}from"./image-Crh0-mEs.js";import{P as L,a as D,T as q}from"./trash-DPpm4aak.js";import"./chevron-down-BeqrvMlZ.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=r("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),I=({media:i,onSave:l,onCancel:r})=>{const[c,d]=s.useState(i),m=e=>{const{name:s,value:a}="target"in e?e.target:e;d((e=>({...e,[s]:a})))};return e.jsx("form",{onSubmit:e=>{e.preventDefault(),l(c)},children:e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"title",children:"Заголовок"}),e.jsx(v,{id:"title",name:"title",value:c.title,onChange:m,required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"type",children:"Тип медиа"}),e.jsxs(g,{value:c.type,onValueChange:e=>m({name:"type",value:e}),children:[e.jsx(p,{children:e.jsx(f,{})}),e.jsxs(N,{children:[e.jsx(b,{value:"image",children:"Фото"}),e.jsx(b,{value:"video",children:"Видео"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"category",children:"Категория"}),e.jsxs(g,{value:c.category,onValueChange:e=>m({name:"category",value:e}),children:[e.jsx(p,{children:e.jsx(f,{})}),e.jsxs(N,{children:[e.jsx(b,{value:"match",children:"Матчи"}),e.jsx(b,{value:"training",children:"Тренировки"}),e.jsx(b,{value:"interview",children:"Интервью"}),e.jsx(b,{value:"stadium",children:"Стадион"}),e.jsx(b,{value:"academy",children:"Академия"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"thumbnail",children:"URL миниатюры"}),e.jsx(v,{id:"thumbnail",name:"thumbnail",value:c.thumbnail,onChange:m,required:!0}),c.thumbnail&&e.jsx("div",{className:"mt-2 rounded-lg overflow-hidden aspect-video",children:e.jsx("img",{src:c.thumbnail,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"url",children:["URL ","video"===c.type?"видео":"изображения"]}),e.jsx(v,{id:"url",name:"url",value:c.url,onChange:m,required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"date",children:"Дата"}),e.jsx(v,{id:"date",name:"date",type:"text",value:c.date,onChange:m,required:!0})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6 pt-4 border-t",children:[e.jsxs(t,{variant:"outline",type:"button",onClick:r,children:[e.jsx(n,{className:"mr-2 h-4 w-4"})," Отмена"]}),e.jsxs(t,{type:"submit",className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(y,{className:"mr-2 h-4 w-4"})," Сохранить"]})]})]})})},O=()=>{const[r,n]=s.useState([]),[u,v]=s.useState(!1),[g,p]=s.useState(null),[f,N]=s.useState(null);s.useEffect((()=>{n(w())}),[]);const b=()=>{const e={id:`media-${Date.now()}`,type:"image",title:"",date:(new Date).toLocaleDateString("ru-RU"),thumbnail:"",url:"",category:"match"};p(e),v(!0)};return e.jsxs("div",{children:[e.jsx(a,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:e.jsxs(i,{className:"flex flex-row items-center justify-between",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-fc-green mr-3 flex items-center justify-center",children:e.jsx(F,{className:"h-4 w-4 text-white"})}),e.jsx("span",{children:"Медиагалерея"})]})}),e.jsxs(t,{onClick:b,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(L,{className:"mr-2 h-4 w-4"})," Добавить медиафайл"]})]})}),u&&g?e.jsx(I,{media:g,onSave:e=>{try{r.some((s=>s.id===e.id))?(k(e),c({title:"Медиафайл обновлен",description:"Медиафайл успешно обновлен"})):(S(e),c({title:"Медиафайл добавлен",description:"Новый медиафайл успешно добавлен"})),n(w()),v(!1),p(null)}catch(s){c({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить медиафайл"})}},onCancel:()=>{v(!1),p(null)}}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.map((s=>e.jsxs(a,{className:"relative group",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover rounded-t-lg"}),"video"===s.type&&e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:e.jsx(V,{className:"h-12 w-12 text-white"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-1 line-clamp-1",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs",children:s.category}),e.jsx("span",{className:"ml-2",children:s.date})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>(p(s),void v(!0)),className:"text-gray-500 hover:text-gray-700",children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>{return e=s.id,void N(e);var e},className:"text-red-500 hover:text-red-700",children:e.jsx(q,{className:"h-4 w-4"})})]})]})]})]},s.id))),0===r.length&&e.jsxs(a,{className:"col-span-full p-12 text-center",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"Медиафайлы не найдены"}),e.jsxs(t,{onClick:b,variant:"outline",children:[e.jsx(L,{className:"mr-2 h-4 w-4"})," Добавить первый медиафайл"]})]})]}),e.jsx(d,{open:!!f,onOpenChange:()=>N(null),children:e.jsxs(m,{children:[e.jsxs(o,{children:[e.jsx(h,{children:"Подтверждение удаления"}),e.jsx(x,{children:"Вы уверены, что хотите удалить этот медиафайл? Это действие нельзя будет отменить."})]}),e.jsxs(j,{children:[e.jsx(t,{variant:"outline",onClick:()=>{N(null)},children:"Отмена"}),e.jsx(t,{variant:"destructive",onClick:()=>{if(f){try{C(f),n(w()),c({title:"Медиафайл удален",description:"Медиафайл был успешно удален"})}catch(e){c({variant:"destructive",title:"Ошибка",description:"Не удалось удалить медиафайл"})}N(null)}},children:"Удалить"})]})]})})]})};export{O as default};
