import{j as e}from"./ui-B5VS9Rxm.js";import{r as s}from"./react-vendor-C5eXiI5f.js";import{C as a,a as t,b as r}from"./card-CM7KcF0P.js";import{B as i}from"./button-3IpleGdJ.js";import{X as l,t as n}from"./index-B8v6iQwI.js";import{D as c,a as d,b as o,c as m,d as x,e as h}from"./dialog-C94tb-ZA.js";import{L as j,I as u}from"./label-DwvOoeN7.js";import{T as g}from"./textarea-BIS6oGJB.js";import{S as v,a as p,b as f,c as N,d as w}from"./select-BxoUi1nJ.js";import{S as b}from"./save-C7W-cLpe.js";import{g as y,d as C,u as S,c as k}from"./newsOperations-CTj7FNAH.js";import{N as F}from"./newspaper-JGv0m_97.js";import{P as q,a as D,T as L}from"./trash-DPpm4aak.js";import"./chevron-down-BeqrvMlZ.js";const G=({news:t,onSave:r,onCancel:n})=>{const[c,d]=s.useState(t),o=e=>{const{name:s,value:a}="target"in e?e.target:e;d((e=>({...e,[s]:a})))};return e.jsx("form",{onSubmit:e=>{e.preventDefault(),r(c)},children:e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title",children:"Заголовок"}),e.jsx(u,{id:"title",name:"title",value:c.title,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"excerpt",children:"Краткое описание"}),e.jsx(g,{id:"excerpt",name:"excerpt",value:c.excerpt,onChange:o,required:!0,rows:3})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"content",children:"Содержание новости"}),e.jsx(g,{id:"content",name:"content",value:c.content,onChange:o,required:!0,rows:10})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"image",children:"URL изображения"}),e.jsx(u,{id:"image",name:"image",value:c.image,onChange:o,required:!0}),c.image&&e.jsx("div",{className:"mt-2 rounded-lg overflow-hidden aspect-video",children:e.jsx("img",{src:c.image,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"category",children:"Категория"}),e.jsxs(v,{value:c.category,onValueChange:e=>o({name:"category",value:e}),children:[e.jsx(p,{children:e.jsx(f,{})}),e.jsxs(N,{children:[e.jsx(w,{value:"matches",children:"Матчи"}),e.jsx(w,{value:"club",children:"Клуб"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"date",children:"Дата"}),e.jsx(u,{id:"date",name:"date",type:"text",value:c.date,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"time",children:"Время"}),e.jsx(u,{id:"time",name:"time",type:"text",value:c.time,onChange:o,required:!0})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6 pt-4 border-t",children:[e.jsxs(i,{variant:"outline",type:"button",onClick:n,children:[e.jsx(l,{className:"mr-2 h-4 w-4"})," Отмена"]}),e.jsxs(i,{type:"submit",className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(b,{className:"mr-2 h-4 w-4"})," Сохранить"]})]})]})})},O=()=>{const[l,j]=s.useState([]),[u,g]=s.useState(!1),[v,p]=s.useState(null),[f,N]=s.useState(null);s.useEffect((()=>{j(y())}),[]);const w=()=>{const e={id:`news-${Date.now()}`,title:"",excerpt:"",content:"",category:"club",date:(new Date).toLocaleDateString("ru-RU"),time:(new Date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),image:"",views:0};p(e),g(!0)};return e.jsxs("div",{children:[e.jsx(a,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:e.jsxs(t,{className:"flex flex-row items-center justify-between",children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-fc-green mr-3 flex items-center justify-center",children:e.jsx(F,{className:"h-4 w-4 text-white"})}),e.jsx("span",{children:"Управление новостями"})]})}),e.jsxs(i,{onClick:w,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," Добавить новость"]})]})}),u&&v?e.jsx(G,{news:v,onSave:e=>{try{l.some((s=>s.id===e.id))?(S(e),n({title:"Новость обновлена",description:"Новость успешно обновлена"})):(k(e),n({title:"Новость добавлена",description:"Новая новость успешно добавлена"})),j(y()),g(!1),p(null)}catch(s){n({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить новость"})}},onCancel:()=>{g(!1),p(null)}}):e.jsxs("div",{className:"grid gap-4",children:[l.map((s=>e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.image||"/placeholder.svg",alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s.excerpt}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs mr-2",children:"matches"===s.category?"Матчи":"Клуб"}),e.jsxs("span",{children:[s.date," ",s.time]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>(p(s),void g(!0)),className:"text-gray-500 hover:text-gray-700",children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>{return e=s.id,void N(e);var e},className:"text-red-500 hover:text-red-700",children:e.jsx(L,{className:"h-4 w-4"})})]})]})},s.id))),0===l.length&&e.jsxs(a,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"Новости не найдены"}),e.jsxs(i,{onClick:w,variant:"outline",children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," Добавить первую новость"]})]})]}),e.jsx(c,{open:!!f,onOpenChange:()=>N(null),children:e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Подтверждение удаления"}),e.jsx(x,{children:"Вы уверены, что хотите удалить эту новость? Это действие нельзя будет отменить."})]}),e.jsxs(h,{children:[e.jsx(i,{variant:"outline",onClick:()=>{N(null)},children:"Отмена"}),e.jsx(i,{variant:"destructive",onClick:()=>{if(f){try{C(f),j(y()),n({title:"Новость удалена",description:"Новость была успешно удалена"})}catch(e){n({variant:"destructive",title:"Ошибка",description:"Не удалось удалить новость"})}N(null)}},children:"Удалить"})]})]})})]})};export{O as default};
