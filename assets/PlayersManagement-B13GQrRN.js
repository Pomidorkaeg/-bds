import{j as e,X as s,E as a,f as r,H as i,p as t,J as n,K as l}from"./ui-dsA3UTJJ.js";import{r as d,f as c}from"./vendor-VrRidEet.js";import{B as o}from"./button-DhUj6jFD.js";import{L as m,I as h}from"./label-5gP1uu55.js";import{g as x,a as u}from"./teamsData-CbQgeqDZ.js";import{t as p}from"./index-C5T_0QIt.js";import{g as j,d as g,u as f,c as v}from"./playerOperations-CaNZQc2x.js";import{D as y,a as b,b as w,c as N,d as C,e as k}from"./dialog-aqK-hrSm.js";import{C as D,a as F,b as q}from"./card-DTOVq60Q.js";const S=({formData:s,handleChange:a})=>{const r=x();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"ФИО игрока"}),e.jsx(h,{id:"name",name:"name",value:s.name,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"position",children:"Позиция"}),e.jsxs("select",{id:"position",name:"position",value:s.position,onChange:a,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[e.jsx("option",{value:"Вратарь",children:"Вратарь"}),e.jsx("option",{value:"Защитник",children:"Защитник"}),e.jsx("option",{value:"Полузащитник",children:"Полузащитник"}),e.jsx("option",{value:"Нападающий",children:"Нападающий"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"number",children:"Номер"}),e.jsx(h,{id:"number",name:"number",type:"number",value:s.number,onChange:a,min:"1",max:"99",required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"nationality",children:"Национальность"}),e.jsx(h,{id:"nationality",name:"nationality",value:s.nationality,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"birthDate",children:"Дата рождения"}),e.jsx(h,{id:"birthDate",name:"birthDate",value:s.birthDate,onChange:a,placeholder:"ДД.ММ.ГГГГ",required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"teamId",children:"Команда"}),e.jsx("select",{id:"teamId",name:"teamId",value:s.teamId,onChange:a,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:r.map((s=>e.jsx("option",{value:s.id,children:s.name},s.id)))})]})]})},I=({formData:s,handleChange:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"image",children:"URL фото"}),e.jsx(h,{id:"image",name:"image",value:s.image,onChange:a,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"height",children:"Рост (см)"}),e.jsx(h,{id:"height",name:"height",type:"number",value:s.height,onChange:a,min:"150",max:"220",required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"weight",children:"Вес (кг)"}),e.jsx(h,{id:"weight",name:"weight",type:"number",value:s.weight,onChange:a,min:"50",max:"120",required:!0})]})]})]}),L=({formData:s,handleChange:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"matches",children:"Матчи"}),e.jsx(h,{id:"matches",name:"matches",type:"number",value:s.matches,onChange:a,min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"goals",children:"Голы"}),e.jsx(h,{id:"goals",name:"goals",type:"number",value:s.goals,onChange:a,min:"0",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"assists",children:"Передачи"}),e.jsx(h,{id:"assists",name:"assists",type:"number",value:s.assists,onChange:a,min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"yellowCards",children:"Жёлтые карточки"}),e.jsx(h,{id:"yellowCards",name:"yellowCards",type:"number",value:s.yellowCards,onChange:a,min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"redCards",children:"Красные карточки"}),e.jsx(h,{id:"redCards",name:"redCards",type:"number",value:s.redCards,onChange:a,min:"0",required:!0})]})]})]}),T=({player:r,onSave:i,onCancel:t})=>{const[n,l]=d.useState({...r}),c=e=>{const{name:s,value:a}=e.target;["number","height","weight","matches","goals","assists","yellowCards","redCards"].includes(s)?l({...n,[s]:parseInt(a,10)||0}):l({...n,[s]:a})};return e.jsxs("form",{onSubmit:e=>{e.preventDefault();try{if(!n.name.trim())return void p({variant:"destructive",title:"Ошибка",description:"Имя игрока не может быть пустым"});if(n.number<1||n.number>99)return void p({variant:"destructive",title:"Ошибка",description:"Номер игрока должен быть от 1 до 99"});i(n)}catch(s){p({variant:"destructive",title:"Ошибка при сохранении",description:"Произошла ошибка при сохранении игрока"})}},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(S,{formData:n,handleChange:c}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{formData:n,handleChange:c}),e.jsx(L,{formData:n,handleChange:c})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs(o,{variant:"outline",type:"button",onClick:t,children:[e.jsx(s,{className:"mr-2 h-4 w-4"})," Отмена"]}),e.jsxs(o,{type:"submit",className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(a,{className:"mr-2 h-4 w-4"})," Сохранить"]})]})]})},z=({player:s,onSave:a,onCancel:r})=>e.jsx(T,{player:s,onSave:a,onCancel:r}),A=({teamName:s,primaryColor:a,onAddNew:t})=>e.jsx(D,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:e.jsxs(F,{className:"flex flex-row items-center justify-between",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full mr-3 flex items-center justify-center",style:{backgroundColor:a||"#2e7d32"},children:e.jsx(r,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{children:["Управление игроками: ",s]})]})}),e.jsxs(o,{onClick:t,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(i,{className:"mr-2 h-4 w-4"})," Добавить игрока"]})]})}),E=({searchTerm:s,setSearchTerm:a})=>e.jsxs("div",{className:"relative mb-6",children:[e.jsx(t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(h,{className:"pl-10",placeholder:"Поиск игроков по имени или позиции...",value:s,onChange:e=>a(e.target.value)})]}),G=({players:s,searchTerm:a,primaryColor:r,onEdit:i,onDelete:t})=>{const d=s.filter((e=>e.name.toLowerCase().includes(a.toLowerCase())||e.position.toLowerCase().includes(a.toLowerCase())));return e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"№"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Игрок"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Позиция"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Характеристики"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статистика"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[d.map((s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full text-white font-medium text-sm",style:{backgroundColor:r||"#2e7d32"},children:s.number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:s.image,alt:s.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.nationality})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:s.position})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.height," см, ",s.weight," кг"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:[s.matches," матчей"]}),e.jsxs("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:[s.goals," голов"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>i(s),className:"text-blue-600 hover:text-blue-900 mr-2",children:e.jsx(n,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>t(s.id),className:"text-red-600 hover:text-red-900",children:e.jsx(l,{className:"h-4 w-4"})})]})]},s.id))),0===d.length&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-gray-500",children:"Игроки не найдены. Добавьте первого игрока!"})})]})]})})},H=()=>{const[a]=c(),r=a.get("team")||"gudauta",[i,t]=d.useState([]),[n,l]=d.useState(""),[m,h]=d.useState(!1),[x,D]=d.useState(null),[F,q]=d.useState(null),S=u(r);d.useEffect((()=>{const e=j(r);t(e)}),[r]);const I=()=>{h(!1),D(null)};return e.jsxs("div",{children:[e.jsx(A,{teamName:(null==S?void 0:S.name)||"Команда",primaryColor:(null==S?void 0:S.primaryColor)||"#2e7d32",onAddNew:()=>{const e={id:`player-${Date.now()}`,name:"",position:"Нападающий",number:i.length+1,birthDate:"",height:180,weight:75,nationality:"Россия",image:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",matches:0,goals:0,assists:0,yellowCards:0,redCards:0,teamId:r};D(e),h(!0)}}),m&&x?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:x.id.includes("player-")&&!i.some((e=>e.id===x.id))?"Добавить нового игрока":"Редактировать игрока"}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(o,{variant:"outline",size:"sm",onClick:I,children:[e.jsx(s,{className:"mr-2 h-4 w-4"})," Отмена"]})})]}),e.jsx(z,{player:x,onSave:e=>{try{i.some((s=>s.id===e.id))?(f(e),t(i.map((s=>s.id===e.id?e:s))),p({title:"Игрок обновлен",description:"Информация об игроке успешно обновлена"})):(v(e),t([...i,e]),p({title:"Игрок добавлен",description:"Новый игрок успешно добавлен в систему"})),h(!1),D(null)}catch(s){p({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить изменения"})}},onCancel:I})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{searchTerm:n,setSearchTerm:l}),e.jsx(G,{players:i,searchTerm:n,primaryColor:(null==S?void 0:S.primaryColor)||"#2e7d32",onEdit:e=>{D(e),h(!0)},onDelete:e=>{q(e)}})]}),e.jsx(y,{open:!!F,onOpenChange:e=>!e&&q(null),children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(N,{children:"Подтверждение удаления"}),e.jsx(C,{children:"Вы уверены, что хотите удалить этого игрока? Это действие нельзя будет отменить."})]}),e.jsxs(k,{children:[e.jsx(o,{variant:"outline",onClick:()=>{q(null)},children:"Отмена"}),e.jsx(o,{variant:"destructive",onClick:()=>{if(F)try{g(F),t(i.filter((e=>e.id!==F))),p({title:"Игрок удален",description:"Игрок был успешно удален из системы"}),q(null)}catch(e){p({variant:"destructive",title:"Ошибка",description:"Не удалось удалить игрока"})}},children:"Удалить"})]})]})})]})};export{H as default};
